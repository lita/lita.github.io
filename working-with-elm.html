<!DOCTYPE html>
<html lang="en">
<head>
        <title>Working with Elm</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://litacho.github.io/theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="http://litacho.github.io/theme/css/syntax.css" type="text/css" />
         <link rel="stylesheet" href="http://litacho.github.io/theme/css/social.css" type="text/css" />



        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://litacho.github.io/css/ie.css"/>
                <script src="http://litacho.github.io/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://litacho.github.io/css/ie6.css"/><![endif]-->

</head>
<body id="index" class="home">
        <header id="banner" class="body">
                <div class="social">
                <a href='http://www.facebook.com/litacho' class='icon facebook'></a>
                <a href='http://www.twitter.com/litacho' class='icon twitter'></a>
                <a href='/feeds/all.atom.xml' class='icon rss'></a>
                </div>
                <h1><a href="http://litacho.github.io/index.html">Lita Cho </a></h1>

                <nav><ul>
                    <li ><a href="http://litacho.github.io/index.html">Home</a>|</li>

                <!--Displays Pages on Menu -->
                    <li ><a href="http://litacho.github.io/pages/about.html">About</a>|</li> 
                    <li ><a href="http://litacho.github.io/pages/projects.html">Projects</a>|</li> 
                
                <!--Displays Categories on Menu -->
                        <li class="active"><a href="http://litacho.github.io/category/blog.html">Blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="working-with-elm.html" rel="bookmark"
           title="Permalink to Working with Elm">Working with Elm</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-03-05T02:07:00">
                Wed 05 March 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="http://litacho.github.io/author/lita-cho.html">Lita Cho</a>
        </address>
<p>In <a href="http://litacho.github.io/category/blog.html">Blog</a>. </p>
<p>tags: <a href="http://litacho.github.io/tag/elm.html">elm</a><a href="http://litacho.github.io/tag/website.html">website</a><a href="http://litacho.github.io/tag/hacker-school.html">hacker school</a></p></footer><!-- /.post-info -->      <p>Last week, we had Evan Czaplicki as our resident! He is an awesome guy who
invented Elm, a functional language used for making interactive programs. It has
been awhile since I've done any functional programming. Basically, I've only
written ghetto Scheme code back in college (if you went to Berkeley, the class
was CS61A). But I've completely forgotten it.</p>
<p>Evan gave a great talk for our batch, live coding a Mario game during the
presentation! You guys have to check it out!</p>
<p><a href="http://elm-lang.org/edit/examples/Intermediate/Mario.elm">Mario programmed in Elm</a></p>
<p>The talk was enough to get me to try to learn it, even though I  had no
intention on learning a functional programming language. I know this was a
distraction from learning web programming, but it's not like I was binging  on a
TV show...</p>
<p>Elm is very similar to Haskell, ML, and OCaml. It is a statically-typed,
functional language. If you don't have Haskell installed, installing Elm  REALLY
sucks right now. Evan is working on making an installer. For now, I  mostly did
my coding on the interactive browser, which compiles the code on Evan's server.</p>
<p><a href="http://elm-lang.org/try">Try Elm!</a></p>
<p>Starting was SOOOoo hard. I just tried writing a linked-list...</p>
<div class="highlight"><pre><span class="n">data</span> <span class="n">LinkedList</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Empty</span> <span class="o">|</span> <span class="n">Cons</span> <span class="n">a</span> <span class="p">(</span><span class="n">LinkedList</span> <span class="n">a</span><span class="p">)</span>
<span class="n">generateList</span> <span class="n">x</span> <span class="o">=</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span> <span class="n">Empty</span> 
                 <span class="k">else</span> <span class="n">Cons</span> <span class="n">x</span> <span class="p">(</span><span class="n">generateList</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">main</span> <span class="o">=</span> <span class="n">asText</span> <span class="p">(</span><span class="n">generateList</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>


<p>You have no idea how long this took me to write. Basically, I write an algebraic
data type (ADT), which basically says I can be either "Empty" or a two element
data with "a" and another LinkedList. Cons is a Lisp thing, that just means it
constructs two elements. <code>generateList</code> just recursively creates a  LinkedList
from <code>x</code> to 0.</p>
<p>I knew making any project was going to be death after trying to do this. I
decided I try to write a bouncy ball.. How hard could that be. This is what I
ended up creating.</p>
<p><a href="http://share-elm.com/sprout/5317940ee4b0f7cc0dd4e16d">Red Bouncing Ball</a></p>
<p>I have to admit, I had a lot of help from Evan. I had trouble understanding how 
data was flowing. He made these diagrams:</p>
<div class="highlight"><pre><span class="n">add</span><span class="o">:</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="o">-&gt;</span> <span class="n">Int</span>
<span class="n">add</span> <span class="n">a</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>


<p>At first, these didn't make any sense. However, talking with Evan and reading
the <a href="http://www.haskell.org/haskellwiki/Introduction">Haskell Introduction</a> page definitely helped. First, parenthesis are
not needed to pass in arguments. They represent a grouping. So here, <code>add</code> takes
in two arguments, <code>a</code> and <code>b</code>. <code>=</code> here doesn't mean assignment. It represents a
definition of a function.</p>
<p>With functional programming, it is a lot like a math equation. You have to think
about how the data flows through the method rather than saving state through
variables. Methods don't change or update the data. Data goes in through the
pipe, some transformations happen, and new data comes out of the pipe.  In the
<code>add</code> method, you can very well give it just one argument. This will just return
an incomplete function rather than an <code>Int</code>, which takes in one <code>Int</code> rather
than two.</p>
<p>So my next idea was to make a lot of these balls and make them collide with each
other. However, if you can't save state, then how are you suppose to update
balls' positions and velocities as they interact with each other?</p>
<p>Basically, you make copies of everything... Seriously.</p>
<p>You make a copy of the old state. Then you take one ball and compare that ball
to each ball in the old state (ignoring the ball itself in the old state). Then
the method outputs a new ball with the updated positions and velocities. You
then <code>map</code> that to all the balls to get the new state.</p>
<p>Here is the million-dollar code that does this, which I can't believe I wrote...</p>
<div class="highlight"><pre>distance <span class="p">(</span>b1<span class="p">,</span>b2<span class="p">)</span> <span class="o">=</span> <span class="p">(</span>b2.x<span class="o">-</span>b1.x<span class="p">)</span><span class="o">^</span><span class="m">2</span> <span class="o">+</span> <span class="p">(</span>b2.y<span class="o">-</span>b1.y<span class="p">)</span><span class="o">^</span><span class="m">2</span>

collision  oldBall newBall <span class="o">=</span> 
    <span class="kr">if</span> <span class="p">(</span>not <span class="p">(</span>newBall <span class="o">==</span> oldBall<span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>distance <span class="p">(</span>oldBall<span class="p">,</span>newBall<span class="p">)</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="m">2</span><span class="o">*</span>radius<span class="p">)</span><span class="o">^</span><span class="m">2</span><span class="p">)</span>
    then <span class="p">{</span>newBall <span class="o">|</span> vx <span class="o">&lt;-</span> <span class="o">-</span>newBall.vx<span class="p">,</span>
                    vy <span class="o">&lt;-</span> <span class="o">-</span>newBall.vy<span class="p">}</span>
    <span class="kr">else</span> newBall

update ball <span class="o">=</span> foldl collision ball balls

map update balls
</pre></div>


<p>The <code>collision</code> method checks to see if the oldBall collides with the newBall
using the distance formula. If so, then it reverses the velocities. If the
oldBall and newBall are equal, then it doesn't do anything, since the balls are
not allowed to collide with itself.</p>
<p>The <code>update</code> method is iterating through the list of new balls, using foldl, to
check all the balls against one old ball.</p>
<p>Lastly, I map the update function to all the old balls.</p>
<p>Here is the result of my week-long effort. It came to about 73 lines of code! I
think that is impressive for a newbie learning functional programming.</p>
<p><a href="http://share-elm.com/sprout/5320e1f1e4b0f7cc0dd4e697">Colliding Colorful Balls!</a> - Click on the white canvas to make balls 
appear!</p>
    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "working-with-elm.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://litacho.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">

        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'litacho';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>